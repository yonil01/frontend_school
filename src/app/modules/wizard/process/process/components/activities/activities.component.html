<div class="flex gap-4 items-center">
  <button type="button" class="b-outline rounded-md" (click)="backTasksEvent()">{{'BACK' | translate}}</button>
  <div class="text-xl text-black"><span>{{executionInput.name}}</span></div>
</div>

<div class="w-full h-full mt-4 flex">
  <div class="one">
    <perfect-scrollbar>
      <p-tree
        [value]="treeData"
        layout="vertical"
        [style]="{
          margin: 'areSomeExecs' ? '1em 1em 1em 1em' : '0em 1em 1em 1em',
          width: 'calc(100% - 2em)',
          overflow: 'auto',
          height: '70vh'
    }"
        selectionMode="single"
        [(selection)]="node"
        [contextMenu]="cm"
        (click)="selectNode()"
      >
        <ng-template let-node pTemplate="default">
          <div class="node-container">
            <span class="ui-treenode-icon" [class]="node['data'].icon"></span>
            <span>{{ node['label'] }}</span>
            <span class="pi pi-circle-on on-status-icon"
              *ngIf="node['data']['status'] !== null && node['data']['status']"
              pTooltip="Activo"
            ></span>
            <span class="pi pi-circle-off off-status-icon"
              *ngIf="node['data']['status'] !== null && !node['data']['status']"
              pTooltip="Inactivo"
            ></span>
          </div>
        </ng-template>
      </p-tree>
    </perfect-scrollbar>
  </div>

  <div class="two">
    <perfect-scrollbar *ngIf="showForm">
      <div class="flex justify-end" style="margin: 0.3em 1em 0 0;">
        <i class="pi pi-times cursor-pointer" (click)="showForm = false"></i>
      </div>
      <div class="side-form">
        <app-activity-form
          [docTypes]="docTypes"
          [roles]="roles"
          [activities]="activities"
          [isCreate]="isCreate"
          [rule]="currentRule"
          [entities]="entities"
          (ruleSaved)="manageRuleSaved($event)"
        ></app-activity-form>
      </div>
    </perfect-scrollbar>
  </div>
</div>



<app-block-page [show]="isBlockPage"></app-block-page>

<p-contextMenu #cm appendTo="body" [model]="menuItems" (onShow)="onContextMenu(node)"></p-contextMenu>
<ec-toast [toastStyle]="toastStyle"></ec-toast>
<p-confirmDialog
  #cd
  appendTo="body"
  icon="pi pi-exclamation-triangle"
  [style]="{ width: '40em' }"
  [transitionOptions]="'0ms'"
>
  <p-footer *ngIf="isDeleteDialog">
    <div class="w-full flex gap-4 items-center">
      <button type="button" class="b-outline" (click)="cd.reject()">{{'CANCEL' | translate}}</button>
      <button type="button" class="b-solid" (click)="cd.accept()">{{'DELETE' | translate}}</button>
    </div>
  </p-footer>
  <p-footer *ngIf="isAnnounceDialog">
    <button type="button" class="b-solid" (click)="cd.accept()">{{'ACCEPT' | translate}}</button>
  </p-footer>
</p-confirmDialog>
