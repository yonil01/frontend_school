{"ast":null,"code":"import _asyncToGenerator from \"D:\\\\Repositories\\\\Trabajo\\\\ecatch-web-config\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { FormControl } from \"@angular/forms\";\nimport { editAttribute } from \"@app/core/store/actions/entity.action\";\nimport { v4 as uuidv4 } from 'uuid';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/modules/wizard/entidades/services/datasets/datasets.service\";\nimport * as i2 from \"@app/modules/wizard/entidades/services/entities.service\";\nimport * as i3 from \"@ngrx/store\";\nimport * as i4 from \"@app/ui/components/layout/layout.component\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@app/ui/components/footer/footer.component\";\nexport class EntityAddDatasetComponent {\n  constructor(datasetsService, entityService, store) {\n    this.datasetsService = datasetsService;\n    this.entityService = entityService;\n    this.store = store;\n    this.datasets = [];\n    this.datasetForm = new FormControl(null);\n  }\n\n  ngOnInit() {\n    this.datasetsService.getDatasets().subscribe(res => {\n      var _a;\n\n      this.datasets = res.data;\n\n      if ((_a = this.attribute) === null || _a === void 0 ? void 0 : _a.entities_attributes_dataset) {\n        const dataset = this.datasets.find(dts => dts.id.toLowerCase() === this.attribute.entities_attributes_dataset.id.toLowerCase());\n        this.datasetForm.setValue(dataset);\n      } else {\n        this.datasetForm.setValue(null);\n      }\n    });\n  }\n\n  save() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if ((_a = _this.attribute) === null || _a === void 0 ? void 0 : _a.entities_attributes_dataset) {\n        yield _this.deleteAttributeDataset();\n      }\n\n      if (_this.datasetForm.value) {\n        const attributeDatasetPersistence = {\n          id: uuidv4().toLowerCase(),\n          attributes_id: _this.attribute.id.toLowerCase(),\n          dataset_id: _this.datasetForm.value.id.toLowerCase()\n        };\n\n        _this.entityService.createAttributeDataset(attributeDatasetPersistence).subscribe(res => {\n          if (!res.error) {\n            const attribute = Object.assign(Object.assign({}, _this.attribute), {\n              entities_attributes_dataset: _this.datasetForm.value\n            });\n\n            _this.store.dispatch(editAttribute({\n              attribute: attribute\n            }));\n\n            _this.datasetForm.setValue(null);\n          } // this.responseSaveAttributeDataset.emit(res);\n\n        });\n      } else {\n        const attribute = Object.assign(Object.assign({}, _this.attribute), {\n          entities_attributes_dataset: null\n        });\n\n        _this.store.dispatch(editAttribute({\n          attribute: attribute\n        })); // this.responseSaveAttributeDataset.emit(null);\n\n      }\n    })();\n  }\n\n  deleteAttributeDataset() {\n    return new Promise((resolv, rej) => {\n      this.entityService.DeleteAttributeDatasetByAttIDAndDatasetID(this.attribute.id.toLowerCase(), this.attribute.entities_attributes_dataset.id.toLowerCase()).subscribe(res => {\n        if (res.error) rej(true);\n        resolv(!res.error);\n      });\n    });\n  }\n\n  cancel() {// this.cancelAndReturn.emit();\n  }\n\n}\n\nEntityAddDatasetComponent.ɵfac = function EntityAddDatasetComponent_Factory(t) {\n  return new (t || EntityAddDatasetComponent)(i0.ɵɵdirectiveInject(i1.DatasetsService), i0.ɵɵdirectiveInject(i2.EntityService), i0.ɵɵdirectiveInject(i3.Store));\n};\n\nEntityAddDatasetComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EntityAddDatasetComponent,\n  selectors: [[\"app-entity-add-dataset\"]],\n  inputs: {\n    attribute: \"attribute\"\n  },\n  decls: 40,\n  vars: 0,\n  consts: [[\"layoutBody\", \"\"], [1, \"ec-container\", \"py-12\", \"space-y-12\", \"bg-white\"], [1, \"flex\", \"flex-col\", \"space-y-2\", \"w-full\"], [1, \"t-h5\", \"text-black\"], [1, \"form\"], [1, \"grid\", \"grid-cols-2\", \"lg:w-1/2\", \"gap-4\"], [1, \"t-caption-2\", \"text-mono-70\", \"col-span-2\"], [1, \"flex\", \"flex-row\", \"space-x-2\", \"items-center\"], [\"type\", \"radio\", \"name\", \"dataset\", 1, \"w-4\", \"h-4\"], [1, \"t-body-2\", \"text-black\"], [1, \"actions\", \"flex\", \"flex-row\", \"space-x-2\"], [1, \"w-full\", \"md:w-auto\", \"b-outline\"], [1, \"w-full\", \"md:w-auto\", \"b-solid\"]],\n  template: function EntityAddDatasetComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"app-layout\");\n      i0.ɵɵelementContainerStart(1, 0);\n      i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"span\", 3);\n      i0.ɵɵtext(5, \"Agregar Datasets\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"div\", 4)(7, \"form\", 5)(8, \"span\", 6);\n      i0.ɵɵtext(9, \"Datasets\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 7);\n      i0.ɵɵelement(11, \"input\", 8);\n      i0.ɵɵelementStart(12, \"label\", 9);\n      i0.ɵɵtext(13, \"Sin dataset\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 7);\n      i0.ɵɵelement(15, \"input\", 8);\n      i0.ɵɵelementStart(16, \"label\", 9);\n      i0.ɵɵtext(17, \"Estado Civil\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 7);\n      i0.ɵɵelement(19, \"input\", 8);\n      i0.ɵɵelementStart(20, \"label\", 9);\n      i0.ɵɵtext(21, \"Con Financiamiento\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 7);\n      i0.ɵɵelement(23, \"input\", 8);\n      i0.ɵɵelementStart(24, \"label\", 9);\n      i0.ɵɵtext(25, \"Tipo de Documentos\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(26, \"div\", 7);\n      i0.ɵɵelement(27, \"input\", 8);\n      i0.ɵɵelementStart(28, \"label\", 9);\n      i0.ɵɵtext(29, \"Fideicomiso Pago\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(30, \"div\", 7);\n      i0.ɵɵelement(31, \"input\", 8);\n      i0.ɵɵelementStart(32, \"label\", 9);\n      i0.ɵɵtext(33, \"Roles\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(34, \"div\", 10)(35, \"button\", 11);\n      i0.ɵɵtext(36, \"Cancelar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"button\", 12);\n      i0.ɵɵtext(38, \"Guardar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(39, \"app-footer\");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i4.LayoutComponent, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i6.FooterComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbnRpdHktYWRkLWRhdGFzZXQuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["D:/Repositories/Trabajo/ecatch-web-config/src/app/modules/wizard/entidades/components/entity-add-dataset/entity-add-dataset.component.ts"],"names":["FormControl","editAttribute","v4","uuidv4","i0","i1","i2","i3","i4","i5","i6","EntityAddDatasetComponent","constructor","datasetsService","entityService","store","datasets","datasetForm","ngOnInit","getDatasets","subscribe","res","_a","data","attribute","entities_attributes_dataset","dataset","find","dts","id","toLowerCase","setValue","save","deleteAttributeDataset","value","attributeDatasetPersistence","attributes_id","dataset_id","createAttributeDataset","error","Object","assign","dispatch","Promise","resolv","rej","DeleteAttributeDatasetByAttIDAndDatasetID","cancel","ɵfac","EntityAddDatasetComponent_Factory","t","ɵɵdirectiveInject","DatasetsService","EntityService","Store","ɵcmp","ɵɵdefineComponent","type","selectors","inputs","decls","vars","consts","template","EntityAddDatasetComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelementContainerStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵelementContainerEnd","directives","LayoutComponent","ɵNgNoValidate","NgControlStatusGroup","FooterComponent","styles"],"mappings":"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","sourcesContent":["import { FormControl } from \"@angular/forms\";\r\nimport { editAttribute } from \"@app/core/store/actions/entity.action\";\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@app/modules/wizard/entidades/services/datasets/datasets.service\";\r\nimport * as i2 from \"@app/modules/wizard/entidades/services/entities.service\";\r\nimport * as i3 from \"@ngrx/store\";\r\nimport * as i4 from \"@app/ui/components/layout/layout.component\";\r\nimport * as i5 from \"@angular/forms\";\r\nimport * as i6 from \"@app/ui/components/footer/footer.component\";\r\nexport class EntityAddDatasetComponent {\r\n    constructor(datasetsService, entityService, store) {\r\n        this.datasetsService = datasetsService;\r\n        this.entityService = entityService;\r\n        this.store = store;\r\n        this.datasets = [];\r\n        this.datasetForm = new FormControl(null);\r\n    }\r\n    ngOnInit() {\r\n        this.datasetsService.getDatasets().subscribe((res) => {\r\n            var _a;\r\n            this.datasets = res.data;\r\n            if ((_a = this.attribute) === null || _a === void 0 ? void 0 : _a.entities_attributes_dataset) {\r\n                const dataset = this.datasets.find((dts) => dts.id.toLowerCase() === this.attribute.entities_attributes_dataset.id.toLowerCase());\r\n                this.datasetForm.setValue(dataset);\r\n            }\r\n            else {\r\n                this.datasetForm.setValue(null);\r\n            }\r\n        });\r\n    }\r\n    async save() {\r\n        var _a;\r\n        if ((_a = this.attribute) === null || _a === void 0 ? void 0 : _a.entities_attributes_dataset) {\r\n            await this.deleteAttributeDataset();\r\n        }\r\n        if (this.datasetForm.value) {\r\n            const attributeDatasetPersistence = {\r\n                id: uuidv4().toLowerCase(),\r\n                attributes_id: this.attribute.id.toLowerCase(),\r\n                dataset_id: this.datasetForm.value.id.toLowerCase(),\r\n            };\r\n            this.entityService.createAttributeDataset(attributeDatasetPersistence).subscribe((res) => {\r\n                if (!res.error) {\r\n                    const attribute = Object.assign(Object.assign({}, this.attribute), { entities_attributes_dataset: this.datasetForm.value });\r\n                    this.store.dispatch(editAttribute({ attribute: attribute }));\r\n                    this.datasetForm.setValue(null);\r\n                }\r\n                // this.responseSaveAttributeDataset.emit(res);\r\n            });\r\n        }\r\n        else {\r\n            const attribute = Object.assign(Object.assign({}, this.attribute), { entities_attributes_dataset: null });\r\n            this.store.dispatch(editAttribute({ attribute: attribute }));\r\n            // this.responseSaveAttributeDataset.emit(null);\r\n        }\r\n    }\r\n    deleteAttributeDataset() {\r\n        return new Promise((resolv, rej) => {\r\n            this.entityService\r\n                .DeleteAttributeDatasetByAttIDAndDatasetID(this.attribute.id.toLowerCase(), this.attribute.entities_attributes_dataset.id.toLowerCase())\r\n                .subscribe((res) => {\r\n                if (res.error)\r\n                    rej(true);\r\n                resolv(!res.error);\r\n            });\r\n        });\r\n    }\r\n    cancel() {\r\n        // this.cancelAndReturn.emit();\r\n    }\r\n}\r\nEntityAddDatasetComponent.ɵfac = function EntityAddDatasetComponent_Factory(t) { return new (t || EntityAddDatasetComponent)(i0.ɵɵdirectiveInject(i1.DatasetsService), i0.ɵɵdirectiveInject(i2.EntityService), i0.ɵɵdirectiveInject(i3.Store)); };\r\nEntityAddDatasetComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: EntityAddDatasetComponent, selectors: [[\"app-entity-add-dataset\"]], inputs: { attribute: \"attribute\" }, decls: 40, vars: 0, consts: [[\"layoutBody\", \"\"], [1, \"ec-container\", \"py-12\", \"space-y-12\", \"bg-white\"], [1, \"flex\", \"flex-col\", \"space-y-2\", \"w-full\"], [1, \"t-h5\", \"text-black\"], [1, \"form\"], [1, \"grid\", \"grid-cols-2\", \"lg:w-1/2\", \"gap-4\"], [1, \"t-caption-2\", \"text-mono-70\", \"col-span-2\"], [1, \"flex\", \"flex-row\", \"space-x-2\", \"items-center\"], [\"type\", \"radio\", \"name\", \"dataset\", 1, \"w-4\", \"h-4\"], [1, \"t-body-2\", \"text-black\"], [1, \"actions\", \"flex\", \"flex-row\", \"space-x-2\"], [1, \"w-full\", \"md:w-auto\", \"b-outline\"], [1, \"w-full\", \"md:w-auto\", \"b-solid\"]], template: function EntityAddDatasetComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"app-layout\");\r\n        i0.ɵɵelementContainerStart(1, 0);\r\n        i0.ɵɵelementStart(2, \"div\", 1)(3, \"div\", 2)(4, \"span\", 3);\r\n        i0.ɵɵtext(5, \"Agregar Datasets\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(6, \"div\", 4)(7, \"form\", 5)(8, \"span\", 6);\r\n        i0.ɵɵtext(9, \"Datasets\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(10, \"div\", 7);\r\n        i0.ɵɵelement(11, \"input\", 8);\r\n        i0.ɵɵelementStart(12, \"label\", 9);\r\n        i0.ɵɵtext(13, \"Sin dataset\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(14, \"div\", 7);\r\n        i0.ɵɵelement(15, \"input\", 8);\r\n        i0.ɵɵelementStart(16, \"label\", 9);\r\n        i0.ɵɵtext(17, \"Estado Civil\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(18, \"div\", 7);\r\n        i0.ɵɵelement(19, \"input\", 8);\r\n        i0.ɵɵelementStart(20, \"label\", 9);\r\n        i0.ɵɵtext(21, \"Con Financiamiento\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(22, \"div\", 7);\r\n        i0.ɵɵelement(23, \"input\", 8);\r\n        i0.ɵɵelementStart(24, \"label\", 9);\r\n        i0.ɵɵtext(25, \"Tipo de Documentos\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(26, \"div\", 7);\r\n        i0.ɵɵelement(27, \"input\", 8);\r\n        i0.ɵɵelementStart(28, \"label\", 9);\r\n        i0.ɵɵtext(29, \"Fideicomiso Pago\");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(30, \"div\", 7);\r\n        i0.ɵɵelement(31, \"input\", 8);\r\n        i0.ɵɵelementStart(32, \"label\", 9);\r\n        i0.ɵɵtext(33, \"Roles\");\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(34, \"div\", 10)(35, \"button\", 11);\r\n        i0.ɵɵtext(36, \"Cancelar\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(37, \"button\", 12);\r\n        i0.ɵɵtext(38, \"Guardar\");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵelement(39, \"app-footer\");\r\n        i0.ɵɵelementContainerEnd();\r\n        i0.ɵɵelementEnd();\r\n    } }, directives: [i4.LayoutComponent, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i6.FooterComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJlbnRpdHktYWRkLWRhdGFzZXQuY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}